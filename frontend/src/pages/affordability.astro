---
// Affordability - Energy Burden Analysis
import EnergyBurdenChart from '../components/EnergyBurdenChart.jsx';
import BurdenVsPriceChart from '../components/BurdenVsPriceChart.jsx';
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Affordability | Energy Burden Analysis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-brand">
        <span class="brand-icon">⚡</span>
        <span class="brand-text">ENERGY<span class="brand-accent">DS3</span></span>
      </div>
      <div class="nav-links">
        <a href="/">Home</a>
        <a href="/global-targets">Global Targets</a>
        <a href="/energy-access">Energy Access</a>
        <a href="/affordability" class="active">Affordability</a>
      </div>
    </nav>

    <header class="hero">
      <div class="hero-grid">
        <div class="hero-content">
          <p class="hero-label">Energy Burden Analysis</p>
          <h1 class="hero-title">
            Electricity
            <span class="title-highlight">Affordability</span>
            <span class="title-year">2024</span>
          </h1>
          <p class="hero-description">
            How much of household income goes to electricity bills? Exploring energy burden across all 50 US states and DC.
          </p>
          <div class="hero-actions">
            <a href="#burden-chart" class="btn btn-primary">View Rankings</a>
            <a href="#price-analysis" class="btn btn-secondary">Price Analysis</a>
          </div>
        </div>
        
        <div class="hero-stats">
          <div class="stat-card stat-featured">
            <span class="stat-number">2.06%</span>
            <span class="stat-label">National Avg Energy Burden</span>
          </div>
          <div class="stat-card">
            <span class="stat-number">3.17%</span>
            <span class="stat-label">Highest (Mississippi)</span>
          </div>
          <div class="stat-card">
            <span class="stat-number">1.17%</span>
            <span class="stat-label">Lowest (Utah)</span>
          </div>
          <div class="stat-card">
            <span class="stat-number">2.7x</span>
            <span class="stat-label">State Disparity</span>
          </div>
        </div>
      </div>
    </header>

    <section id="burden-chart" class="section">
      <div class="section-header">
        <span class="section-number">01</span>
        <h2>Energy Burden by State</h2>
      </div>
      
      <p class="section-description">
        Energy burden measures electricity costs as a percentage of household income. 
        The national average is <strong>2.06%</strong>, but disparities across states reveal 
        significant equity challenges.
      </p>
      
      <div class="chart-container">
        <EnergyBurdenChart client:load />
      </div>
      
      <div class="data-table-wrapper">
        <h3>Top 10 Highest Energy Burden States</h3>
        <table class="data-table">
          <thead>
            <tr>
              <th>Rank</th>
              <th>State</th>
              <th>Burden</th>
              <th>Median Income</th>
              <th>Avg Price</th>
              <th>Annual Bill</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>1</td><td>Mississippi</td><td class="highlight-red">3.17%</td><td>$59,127</td><td>13.5¢</td><td>$1,874</td></tr>
            <tr><td>2</td><td>Alabama</td><td class="highlight-red">3.14%</td><td>$66,659</td><td>15.3¢</td><td>$2,092</td></tr>
            <tr><td>3</td><td>West Virginia</td><td class="highlight-red">3.09%</td><td>$60,798</td><td>15.2¢</td><td>$1,877</td></tr>
            <tr><td>4</td><td>Louisiana</td><td class="highlight-orange">2.78%</td><td>$60,986</td><td>11.8¢</td><td>$1,698</td></tr>
            <tr><td>5</td><td>Hawaii</td><td class="highlight-orange">2.53%</td><td>$100,745</td><td>43.0¢</td><td>$2,552</td></tr>
            <tr><td>6</td><td>Connecticut</td><td class="highlight-orange">2.51%</td><td>$96,049</td><td>28.9¢</td><td>$2,407</td></tr>
            <tr><td>7</td><td>Arkansas</td><td class="highlight-orange">2.51%</td><td>$62,106</td><td>12.4¢</td><td>$1,556</td></tr>
            <tr><td>8</td><td>Kentucky</td><td class="highlight-orange">2.50%</td><td>$64,526</td><td>12.8¢</td><td>$1,613</td></tr>
            <tr><td>9</td><td>South Carolina</td><td class="highlight-orange">2.50%</td><td>$72,350</td><td>14.3¢</td><td>$1,806</td></tr>
            <tr><td>10</td><td>Texas</td><td class="highlight-orange">2.47%</td><td>$79,721</td><td>15.0¢</td><td>$1,970</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="price-analysis" class="section section-alt">
      <div class="section-header">
        <span class="section-number">02</span>
        <h2>Price vs. Burden Analysis</h2>
      </div>
      
      <p class="section-description">
        High electricity prices don't always translate to high energy burden. 
        States with high incomes can absorb higher prices, while low-income states 
        struggle even with lower rates.
      </p>
      
      <div class="chart-container">
        <BurdenVsPriceChart client:load />
      </div>
    </section>

    <section id="methodology" class="section section-dark">
      <div class="section-header">
        <span class="section-number">03</span>
        <h2>Methodology</h2>
      </div>
      
      <div class="methodology-grid">
        <div class="method-card">
          <h3>Data Sources</h3>
          <ul>
            <li><strong>EIA Electricity Data</strong> — Sales, prices, customers (2001-2025)</li>
            <li><strong>Census ACS 2024</strong> — Median household income by state</li>
          </ul>
        </div>
        
        <div class="method-card">
          <h3>Key Calculations</h3>
          <ul>
            <li><strong>Energy Burden</strong> = Annual Bill ÷ Median Income × 100</li>
            <li><strong>Annual Bill</strong> = Avg Price × kWh per Customer</li>
          </ul>
        </div>
        
        <div class="method-card">
          <h3>Thresholds</h3>
          <ul>
            <li><strong>&gt;6%</strong> — Energy Burdened household</li>
            <li><strong>&gt;10%</strong> — Severely Energy Burdened</li>
          </ul>
        </div>
        
        <div class="method-card">
          <h3>Limitations</h3>
          <ul>
            <li>Electricity only (excludes gas, heating oil)</li>
            <li>State averages mask local disparities</li>
          </ul>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="footer-content">
        <div class="footer-brand">
          <span class="brand-icon">⚡</span>
          <span>ENERGY DS3</span>
        </div>
        <p>Center for Energy Research · Data Science Project</p>
        <p class="footer-source">Data: EIA, Census Bureau ACS 2024</p>
      </div>
    </footer>
  </body>
</html>

<style>
  :root {
    --color-bg: #ffffff;
    --color-bg-alt: #f8faf9;
    --color-surface: #f1f5f3;
    --color-primary: #16a34a;
    --color-primary-dim: #22c55e;
    --color-accent: #15803d;
    --color-text: #1a1a1a;
    --color-text-muted: #6b7280;
    --color-border: #e5e7eb;
    --color-red: #dc2626;
    --color-orange: #ea580c;
    --font-sans: 'DM Sans', system-ui, sans-serif;
    --font-mono: 'Space Mono', monospace;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body { font-family: var(--font-sans); background: var(--color-bg); color: var(--color-text); line-height: 1.6; }

  .navbar { position: fixed; top: 0; left: 0; right: 0; display: flex; justify-content: space-between; align-items: center; padding: 1.25rem 3rem; background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); border-bottom: 1px solid var(--color-border); z-index: 100; }
  .nav-brand { display: flex; align-items: center; gap: 0.5rem; font-family: var(--font-mono); font-weight: 700; font-size: 1.1rem; }
  .brand-icon { font-size: 1.5rem; }
  .brand-accent { color: var(--color-primary); }
  .nav-links { display: flex; gap: 2.5rem; }
  .nav-links a { color: var(--color-text-muted); text-decoration: none; font-size: 0.9rem; font-weight: 500; transition: color 0.2s; }
  .nav-links a:hover, .nav-links a.active { color: var(--color-primary); }

  .hero { padding: 8rem 3rem 4rem; background: radial-gradient(ellipse at 20% 80%, rgba(22,163,74,0.06) 0%, transparent 50%), radial-gradient(ellipse at 80% 20%, rgba(34,197,94,0.04) 0%, transparent 50%), var(--color-bg); }
  .hero-grid { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 4rem; align-items: center; }
  .hero-label { font-family: var(--font-mono); font-size: 0.85rem; color: var(--color-primary); text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 1rem; }
  .hero-title { font-size: 3.5rem; font-weight: 700; line-height: 1.1; margin-bottom: 1.5rem; }
  .title-highlight { display: block; color: var(--color-primary); }
  .title-year { display: block; font-family: var(--font-mono); font-size: 4.5rem; color: var(--color-primary-dim); opacity: 0.25; margin-top: -0.5rem; }
  .hero-description { font-size: 1.15rem; color: var(--color-text-muted); max-width: 500px; margin-bottom: 2rem; }
  .hero-actions { display: flex; gap: 1rem; }
  .btn { padding: 0.875rem 1.75rem; font-size: 0.95rem; font-weight: 600; text-decoration: none; border-radius: 6px; transition: all 0.2s; }
  .btn-primary { background: var(--color-primary); color: #fff; }
  .btn-primary:hover { background: var(--color-accent); transform: translateY(-2px); }
  .btn-secondary { background: transparent; color: var(--color-text); border: 1px solid var(--color-border); }
  .btn-secondary:hover { border-color: var(--color-primary); color: var(--color-primary); }
  .hero-stats { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
  .stat-card { background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 12px; padding: 1.5rem; display: flex; flex-direction: column; gap: 0.25rem; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
  .stat-featured { grid-column: span 2; background: linear-gradient(135deg, #ecfdf5, #fff); border-color: var(--color-primary); }
  .stat-number { font-family: var(--font-mono); font-size: 2.25rem; font-weight: 700; color: var(--color-primary); }
  .stat-featured .stat-number { font-size: 3rem; }
  .stat-label { font-size: 0.85rem; color: var(--color-text-muted); }

  .section { padding: 5rem 3rem; }
  .section-dark { background: var(--color-bg-alt); }
  .section-alt { background: var(--color-surface); }
  .section-header { display: flex; align-items: center; gap: 1.5rem; margin-bottom: 2rem; }
  .section-number { font-family: var(--font-mono); font-size: 0.85rem; color: var(--color-primary); padding: 0.5rem 1rem; border: 1px solid var(--color-primary); border-radius: 4px; }
  .section-header h2 { font-size: 2rem; font-weight: 700; }
  .section-description { font-size: 1.1rem; color: var(--color-text-muted); max-width: 800px; margin-bottom: 2rem; }

  .chart-container { background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 16px; padding: 2rem; margin-bottom: 2rem; display: flex; align-items: center; justify-content: center; min-height: 500px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }

  .data-table-wrapper { margin-top: 2rem; }
  .data-table-wrapper h3 { font-size: 1.1rem; margin-bottom: 1rem; }
  .data-table { width: 100%; border-collapse: collapse; background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 12px; overflow: hidden; }
  .data-table th, .data-table td { padding: 1rem 1.25rem; text-align: left; border-bottom: 1px solid var(--color-border); }
  .data-table th { background: var(--color-surface); font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--color-text-muted); }
  .data-table td { font-family: var(--font-mono); font-size: 0.9rem; }
  .data-table tr:last-child td { border-bottom: none; }
  .data-table tr:hover { background: var(--color-bg-alt); }
  .highlight-red { color: var(--color-red); font-weight: 700; }
  .highlight-orange { color: var(--color-orange); font-weight: 700; }

  .methodology-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; }
  .method-card { background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 12px; padding: 1.5rem; }
  .method-card h3 { font-size: 1rem; margin-bottom: 1rem; color: var(--color-primary); }
  .method-card ul { list-style: none; }
  .method-card li { font-size: 0.9rem; color: var(--color-text-muted); padding: 0.5rem 0; border-bottom: 1px solid var(--color-border); }
  .method-card li:last-child { border-bottom: none; }
  .method-card li strong { color: var(--color-text); }

  .footer { padding: 3rem; border-top: 1px solid var(--color-border); text-align: center; }
  .footer-brand { display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-family: var(--font-mono); font-weight: 700; margin-bottom: 1rem; }
  .footer-content p { color: var(--color-text-muted); font-size: 0.9rem; }
  .footer-source { font-family: var(--font-mono); font-size: 0.8rem !important; margin-top: 0.5rem; }

  @media (max-width: 1024px) {
    .hero-grid { grid-template-columns: 1fr; }
    .hero-title { font-size: 2.75rem; }
    .title-year { font-size: 3.5rem; }
    .methodology-grid { grid-template-columns: 1fr; }
  }
  @media (max-width: 768px) {
    .navbar { padding: 1rem 1.5rem; }
    .nav-links { display: none; }
    .hero { padding: 6rem 1.5rem 3rem; }
    .section { padding: 3rem 1.5rem; }
  }
</style>